var homeIndexModule=angular.module("homeIndex",["$strap.directives"]);homeIndexModule.config(["$routeProvider",function(n){n.when("/",{controller:"weightsController",templateUrl:"/templates/weightsView.html"}),n.when("/newweight",{controller:"newTopicController",templateUrl:"/templates/newTopicView.html"}),n.when("/dailyweight/:id",{controller:"singleTopicController",templateUrl:"/templates/singleTopicView.html"}),n.otherwise({redirectTo:"/"})}]),homeIndexModule.factory("dataService",["$http","$q",function(n,t){function e(n){var t=null;return $.each(i,function(i,r){if(r.id==n)return t=r,!1}),t}var i=[],r=!1,u=function(){return r},f=function(){var u=t.defer();return n.get("/api/v1/dailyweights").then(function(n){angular.copy(n.data,i),r=!0,u.resolve()},function(){u.reject()}),u.promise},o=function(r){var u=t.defer();return n.post("/api/v1/dailyweights",r).then(function(n){var t=n.data;i.splice(0,0,t),u.resolve(t)},function(){u.reject()}),u.promise},s=function(n){var i=t.defer(),r;return u()?(r=e(n),r?i.resolve(r):i.reject()):f().then(function(){var t=e(n);t?i.resolve(t):i.reject()},function(){i.reject()}),i.promise};return{weights:i,getweights:f,addWeight:o,isReady:u,getWeightById:s}}]);var weightsController=["$scope","$http","dataService",function(n,t,i){n.newWeight={},n.data=i,n.isBusy=!1,i.isReady()==!1&&(n.isBusy=!0,i.getweights().then(function(){var t=new Date;i.weights.length>0?(n.newWeight.weight=i.weights[0].weight,n.newWeight.bodyFat=i.weights[0].bodyFat):(n.newWeight.weight=0,n.newWeight.bodyFat=0),n.newWeight.weightDate=t},function(){alert("cound not load weights")}).then(function(){n.isBusy=!1}))}],newTopicController=["$scope","$http","$window","dataService",function(n,t,i,r){n.newWeight={},n.save=function(){r.addTopic(n.newTopic).then(function(){i.location="#/"},function(){alert("cannot save the new topic")})}}],singleTopicController=["$scope","dataService","$window","$routeParams",function(n,t,i,r){n.topic=null,n.newReply={},t.getTopicById(r.id).then(function(t){n.topic=t},function(){i.location="#/"}),n.addReply=function(){t.saveReply(n.topic,n.newReply).then(function(){n.newReply.body=""},function(){alert("Could not save the new reply")})}}];
//@ sourceMappingURL=home-index.min.js.map